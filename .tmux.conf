# Tmux Plugin Manager
# Plugins
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-sidebar'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin '15cm/extrakto'

# General
set -g base-index 1
set -s escape-time 0
set-window-option -g aggressive-resize

set-option -g default-shell $SHELL

# Tmux Sidebar
unbind t
set -g @sidebar-tree 't'
set -g @sidebar-tree-focus 'T'
set -g @sidebar-tree-command 'tree -C'

# Auto Restore
set -g @continuum-restore 'on'

# Copy Mode
setw -g mode-keys vi

# the following vi-copy bindings match my vim settings
# see https://github.com/gpakosz/.vim.git
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'C-v' send -X rectangle-toggle
bind-key -T copy-mode-vi 'y' send -X copy-selectioln

# kill window
unbind &
bind z confirm-before "kill-window"
bind \ split-window -h -c "#{pane_current_path}"

# pane movement
bind '@' command-prompt -p "join pane from:"  "join-pane -s '%%'"
bind '#' command-prompt -p "send pane to:" "join-pane -t '%%'"

# clean history
bind , send-keys -R \; clear-history

# detach ^D d
bind ^D detach

# Powerline
run-shell "powerline-daemon -q"

# Source config according to OS
if-shell "uname | grep -q Darwin" "source-file ~/.tmux.conf.mac" "source-file ~/.tmux.conf.linux"

# extrakto
set -g @extrakto_key o
set -g @extrakto_split_size 15
set -g @extrakto_fzf_options "-m --reverse --bind=ctrl-d:page-down,ctrl-u:page-up,ctrl-k:kill-line,pgup:preview-page-up,pgdn:preview-page-down,ctrl-space:toggle-all"
set -g @extrakto_default_opt "path/url"

# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'

# pane rotation
bind ^K rotate -U
bind ^J rotate -D